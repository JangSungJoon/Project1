# Project 주간보고서

- 학부(전공)/학과 : 게임공학과  
- 작성일 : 2022년 10월 11일(06주차)  
- 작성자 성명 : 장성준  
- 프로젝트명 Dragon Dungeon  

## 지난 주 수행 내용
- 장성준  
임시 스킬 아이콘 설정 및 UI 디자인  
![2](https://user-images.githubusercontent.com/114071471/195106970-ae5e1772-4133-4409-afb9-8f2ed19f132a.png)

- 이민우  
캐릭터 스킬마다 스킬의 남은 재사용시간에 따른 이미지를 UI에서 fillAmount로 보이게 설정  
```java
    IEnumerator Grapple_(float Delay1, float Delay2)
    {
        IsGrappleReady = false;
        while (Delay1 > 0)
        {
            Delay1 -= Time.deltaTime;
            Player.player.adventurerScript[(int)Job.Archer].Skill_Image.fillAmount
                = 1 - (Delay1 / Delay2);
            yield return new WaitForFixedUpdate();
        }
        Player.player.adventurerScript[(int)Job.Archer].Skill_Image.fillAmount = 1;
        IsGrappleReady = true;
    }
```
아처의 공격, 화살의 Prefab을 생성하고 마우스의 위치에 따라 각도가 변화하며 포물선 모양으로 이동하는 화살이 나간다.  
```java
        if(gameObject.name == "Archer")
        {
            Vector3 MousePos = Camera.main.ScreenToWorldPoint(new Vector3(Input.mousePosition.x,
                Input.mousePosition.y, -Camera.main.transform.position.z));

            AttackProjectileAngle = Mathf.Atan2(MousePos.y - transform.position.y,
               MousePos.x - transform.position.x) * Mathf.Rad2Deg;

            GameObject Attack = Instantiate(ProjectilePrefab);

            Attack.transform.rotation = Quaternion.AngleAxis
                (AttackProjectileAngle - ControlAngle, Vector3.forward);

            ArrowScript = Attack.GetComponent<Arrow>();
            Attack.transform.position = transform.position;

            ArrowScript.ArrowProjectile(transform.position, MousePos);
        }
```
캐릭터의 이동을 활성화된 캐릭터의 이동속도에 AddForce를 더하여 움직이도록 한다.
```java
//이동 , 현재 활성화 캐릭터의 이동속도 기반
        Move.x = adventurerScript[(int)CurrentJob].MoveSpeed * InputHorizontal * Time.deltaTime;
        if (Jumping)
        { rigid2D.AddForce(Move * new Vector2(0.5f, 0.5f), ForceMode2D.Impulse); }
        else
        { rigid2D.AddForce(Move, ForceMode2D.Impulse); }

        //최대 속도 조절
        if (S_Rush.Rushing != true)
        {
            if (rigid2D.velocity.x > MaxSpeed)
            {
                rigid2D.velocity = new Vector2(MaxSpeed, rigid2D.velocity.y);
            }
            else if (rigid2D.velocity.x < -MaxSpeed)
            {
                rigid2D.velocity = new Vector2(-MaxSpeed, rigid2D.velocity.y);
            }
        }
```

- 김 준  
주인공 캐릭터 3인방의 세부디자인
![Charactor Art](https://user-images.githubusercontent.com/114071471/195090567-a0ab1540-08d8-46dc-a0a6-7ff783a15390.png)

## 수행 하면서 힘들었던 점 및 해결 방법
- 이민우  
1) 캐릭터 스킬의 쿨타임을 표현할 떄, 캐릭터가 비활성화 상태에서도 쿨타임이 돌도록 하는 부분이 힘들었다  
=> 비활성화된 캐릭터의 쿨타임을 조정하기 위해 GameManager에서 캐릭터 스킬을 관리하게 하여 해결했다.  

2) AddForce를 사용한 이동은 Key를 OFF 했을 때 즉시 멈추지 않고 미끄러지는 문제가 발생하였다.  
=> Key가 OFF되었을 시, 캐릭터의 Velocity를 줄여서 멈추도록 하여 해결했다.  

## 이번 주 수행예정 내용
- 장성준  
몬스터 세부 컨셉 완성 및 대략적인 레벨 디자인  
던전 스테이지에 따른 시나리오 및 스토리 정리  

- 이민우  
마우스 위치에 따른 캐릭터 방향 전환  
몬스터의 AI 및 캐릭터 피격시 판정 및 넉백 등의 작동  
현재 조종하는 캐릭터 및 다른 캐릭터의 HP 상황을 표시할 UI 추가  

- 김 준  
주인공 캐릭터의 애니메이션에 모션제작에 사용 될 여러 가지 모션 그림  
